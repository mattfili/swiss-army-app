'use strict';

angular.module('swiss').controller('mainController', function ($scope, $http, GEOCODE, $timeout, Auth, $firebaseAuth, LocalStorage, $rootScope, $state) {
	var vm = this;

	vm.display = true;
	vm.auth = Auth;

	vm.auth.$onAuth(function (authData) {
		if (authData) {
			vm.profile = authData;
			console.log('logged in as' + authData);
		} else {
			console.log('logged out');
			$state.go('start');
		}
	});

	vm.queryChanged = _.debounce(function () {
		$http.get(GEOCODE, {
			params: { address: vm.query }
		}).success(function (data) {
			vm.cities = data.results;
			vm.display = false;
		});
	}, 2000);

	vm.check = {
		weather: false,
		news: false,
		toDo: false
	};

	$rootScope.$on('$stateChangeSuccess', function (event, toState) {
		vm.cities = null;
	});
}).controller('weatherController', function ($scope, $timeout, Weather, WeatherData, currentAuth) {
	var vm = this;

	_.debounce(function () {
		Weather.getWeather();
		Weather.date();
		vm.date = WeatherData.formatdate.toString();
		vm.data = WeatherData;
	}, 2000)();
}).controller('newsController', function (Hacker, paperBoy, $scope, $timeout, currentAuth, $sce, FB, $firebaseObject) {
	var vm = this;
	Hacker.topNews();
	Hacker.askStories();
	Hacker.showStories();
	vm.hackerNews = paperBoy.hackerNews;

	vm.isActive = false;

	vm.favorite = function (news) {
		FB.newFavorite(news);
	};
}).controller('todoController', function ($scope, $timeout, currentAuth) {
	var vm = this;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9tYWluLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUV0QixVQUFVLENBQUMsZ0JBQWdCLEVBQUUsVUFBUyxNQUFNLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLGFBQWEsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRTtBQUMvSCxLQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7O0FBRWQsR0FBRSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7QUFDbEIsR0FBRSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7O0FBR2YsR0FBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxRQUFRLEVBQUU7QUFDbkMsTUFBSSxRQUFRLEVBQUU7QUFDYixLQUFFLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQztBQUN0QixVQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsR0FBRyxRQUFRLENBQUMsQ0FBQztHQUN2QyxNQUFNO0FBQ04sVUFBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUMxQixTQUFNLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0dBQ25CO0VBQ0QsQ0FBQyxDQUFBOztBQUlGLEdBQUUsQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxZQUFZO0FBQ3hDLE9BQUssQ0FDSixHQUFHLENBQUMsT0FBTyxFQUFFO0FBQ2IsU0FBTSxFQUFFLEVBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUM7R0FDM0IsQ0FBQyxDQUNELE9BQU8sQ0FBQyxVQUFTLElBQUksRUFBQztBQUN0QixLQUFFLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUE7QUFDeEIsS0FBRSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7R0FDbkIsQ0FBQyxDQUFBO0VBRUYsRUFBRSxJQUFJLENBQUMsQ0FBQzs7QUFFVCxHQUFFLENBQUMsS0FBSyxHQUFHO0FBQ1YsU0FBTyxFQUFFLEtBQUs7QUFDZCxNQUFJLEVBQUUsS0FBSztBQUNYLE1BQUksRUFBRSxLQUFLO0VBQ1gsQ0FBQTs7QUFFRCxXQUFVLENBQUMsR0FBRyxDQUFDLHFCQUFxQixFQUFFLFVBQVUsS0FBSyxFQUFFLE9BQU8sRUFBRTtBQUMvRCxJQUFFLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztFQUNqQixDQUFDLENBQUE7Q0FFRixDQUFDLENBRUQsVUFBVSxDQUFDLG1CQUFtQixFQUFFLFVBQVMsTUFBTSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRTtBQUM5RixLQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7O0FBRWQsRUFBQyxDQUFDLFFBQVEsQ0FBQyxZQUFXO0FBQ3JCLFNBQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQTtBQUNwQixTQUFPLENBQUMsSUFBSSxFQUFFLENBQUE7QUFDZCxJQUFFLENBQUMsSUFBSSxHQUFHLFdBQVcsQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLENBQUE7QUFDM0MsSUFBRSxDQUFDLElBQUksR0FBRyxXQUFXLENBQUE7RUFDckIsRUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDO0NBR1YsQ0FBQyxDQUVELFVBQVUsQ0FBQyxnQkFBZ0IsRUFBRSxVQUFTLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxlQUFlLEVBQUU7QUFDbEgsS0FBSSxFQUFFLEdBQUcsSUFBSSxDQUFDO0FBQ2QsT0FBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ2pCLE9BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUNwQixPQUFNLENBQUMsV0FBVyxFQUFFLENBQUM7QUFDckIsR0FBRSxDQUFDLFVBQVUsR0FBRyxRQUFRLENBQUMsVUFBVSxDQUFDOztBQUVwQyxHQUFFLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQzs7QUFFcEIsR0FBRSxDQUFDLFFBQVEsR0FBRyxVQUFVLElBQUksRUFBRTtBQUM3QixJQUFFLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQ3JCLENBQUE7Q0FHRCxDQUFDLENBRUQsVUFBVSxDQUFDLGdCQUFnQixFQUFFLFVBQVMsTUFBTSxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUU7QUFDckUsS0FBSSxFQUFFLEdBQUcsSUFBSSxDQUFDO0NBRWQsQ0FBQyxDQUFBIiwiZmlsZSI6InNyYy9qcy9tYWluLmNvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnc3dpc3MnKVxuXG4uY29udHJvbGxlcignbWFpbkNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCBHRU9DT0RFLCAkdGltZW91dCwgQXV0aCwgJGZpcmViYXNlQXV0aCwgTG9jYWxTdG9yYWdlLCAkcm9vdFNjb3BlLCAkc3RhdGUpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHR2bS5kaXNwbGF5ID0gdHJ1ZTtcblx0dm0uYXV0aCA9IEF1dGg7XG5cblxuXHR2bS5hdXRoLiRvbkF1dGgoZnVuY3Rpb24gKGF1dGhEYXRhKSB7XG5cdFx0aWYgKGF1dGhEYXRhKSB7XG5cdFx0XHR2bS5wcm9maWxlID0gYXV0aERhdGE7XG5cdFx0XHRjb25zb2xlLmxvZygnbG9nZ2VkIGluIGFzJyArIGF1dGhEYXRhKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS5sb2coJ2xvZ2dlZCBvdXQnKTtcblx0XHRcdCRzdGF0ZS5nbygnc3RhcnQnKTtcblx0XHR9XG5cdH0pXG5cblxuXG5cdHZtLnF1ZXJ5Q2hhbmdlZCA9IF8uZGVib3VuY2UoZnVuY3Rpb24gKCkge1xuXHRcdCRodHRwXG5cdFx0LmdldChHRU9DT0RFLCB7XG5cdFx0XHRwYXJhbXM6IHthZGRyZXNzOiB2bS5xdWVyeX1cblx0XHR9KVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0dm0uY2l0aWVzID0gZGF0YS5yZXN1bHRzXG5cdFx0XHR2bS5kaXNwbGF5ID0gZmFsc2U7XG5cdFx0fSlcblxuXHR9LCAyMDAwKTtcblxuXHR2bS5jaGVjayA9IHtcblx0XHR3ZWF0aGVyOiBmYWxzZSxcblx0XHRuZXdzOiBmYWxzZSxcblx0XHR0b0RvOiBmYWxzZVxuXHR9XG5cblx0JHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoZXZlbnQsIHRvU3RhdGUpIHtcblx0XHR2bS5jaXRpZXMgPSBudWxsO1xuXHR9KVxuXG59KVxuXG4uY29udHJvbGxlcignd2VhdGhlckNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0LCBXZWF0aGVyLCBXZWF0aGVyRGF0YSwgY3VycmVudEF1dGgpIHtcblx0dmFyIHZtID0gdGhpcztcblxuXHRfLmRlYm91bmNlKGZ1bmN0aW9uKCkge1xuXHRcdFdlYXRoZXIuZ2V0V2VhdGhlcigpXG5cdFx0V2VhdGhlci5kYXRlKClcblx0XHR2bS5kYXRlID0gV2VhdGhlckRhdGEuZm9ybWF0ZGF0ZS50b1N0cmluZygpXG5cdFx0dm0uZGF0YSA9IFdlYXRoZXJEYXRhXG5cdH0sMjAwMCkoKTtcblxuXG59KVxuXG4uY29udHJvbGxlcignbmV3c0NvbnRyb2xsZXInLCBmdW5jdGlvbihIYWNrZXIsIHBhcGVyQm95LCAkc2NvcGUsICR0aW1lb3V0LCBjdXJyZW50QXV0aCwgJHNjZSwgRkIsICRmaXJlYmFzZU9iamVjdCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXHRIYWNrZXIudG9wTmV3cygpO1xuXHRIYWNrZXIuYXNrU3RvcmllcygpO1xuXHRIYWNrZXIuc2hvd1N0b3JpZXMoKTtcblx0dm0uaGFja2VyTmV3cyA9IHBhcGVyQm95LmhhY2tlck5ld3M7XG5cblx0dm0uaXNBY3RpdmUgPSBmYWxzZTtcblxuXHR2bS5mYXZvcml0ZSA9IGZ1bmN0aW9uIChuZXdzKSB7XG5cdFx0RkIubmV3RmF2b3JpdGUobmV3cyk7XG5cdH1cblxuXG59KVxuXG4uY29udHJvbGxlcigndG9kb0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0LCBjdXJyZW50QXV0aCkge1xuXHR2YXIgdm0gPSB0aGlzO1xuXG59KVxuXG4iXX0=
